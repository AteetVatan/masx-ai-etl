# =============================================================================
# MASX AI ETL Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# cp env.example .env

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO


# RunPod Worker Configuration
RUNPOD_WORKERS=4
RUNPOD_API_KEY=your_runpod_api_key_here
RUNPOD_ENDPOINT_ID=xxxxx
RUNPOD_ENDPOINT=https://api.runpod.ai/v2/xxxxx/run


# Proxy Service
PROXY_BASE=https://masxaiproxyservice-production.up.railway.app
PROXY_POST_START_SERVICE=/api/v1/start-refresh
PROXY_GET_PROXIES=/api/v1/proxies
PROXY_API_KEY=XXXXX


# =============================================================================
# DATABASE CONFIGURATION (SUPABASE)
# =============================================================================

# Supabase Project Configuration
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anonymous_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
SUPABASE_DB_PASSWORD=your_supabase_database_password
SUPABASE_DB_URL=your_supabase_database_url

# Database Connection Pool
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=1


# =============================================================================
# PROXY CONFIGURATION
# =============================================================================

# Proxy Settings
PROXY_WEBPAGE=xxxxx
PROXY_TESTING_URL=xxxxx


# =============================================================================
# CHROMA VECTOR DATABASE
# =============================================================================

# Chroma Storage Directories
CHROMA_DEV_PERSIST_DIR=./.chroma_storage
CHROMA_PROD_PERSIST_DIR=/mnt/data/chroma


# =============================================================================
# CONCURRENCY CONFIGURATION - CPU Settings
# Conservative settings for development
#MAX_THREADS=15
#CPU_MAX_THREADS=15
#MAX_PROCS=2
#CPU_MAX_PROCESSES=2
#High-performance settings for production
#MAX_THREADS=40
#CPU_MAX_THREADS=40
#MAX_PROCS=8
#CPU_MAX_PROCESSES=8
# =============================================================================

MAX_THREADS=15
CPU_MAX_THREADS=15
MAX_PROCS=2
CPU_MAX_PROCESSES=2



# =============================================================================
# CONCURRENCY CONFIGURATION - GPU
# Development (Local Machine - Limited GPU Resources)
# GPU_BATCH_SIZE=8
# GPU_MAX_DELAY_MS=100
# GPU_QUEUE_SIZE=100
# GPU_TIMEOUT=3600.0
# GPU_USE_FP16=false
# GPU_ENABLE_WARMUP=false
# Production (Dedicated GPU Resources)
# GPU_BATCH_SIZE=48
# GPU_MAX_DELAY_MS=25
# GPU_QUEUE_SIZE=1000
# GPU_TIMEOUT=7200.0
# GPU_USE_FP16=true
# GPU_ENABLE_WARMUP=true
# For limited GPU memory (8GB):
# GPU_BATCH_SIZE=32
# GPU_USE_FP16=true

# For abundant GPU memory (24GB+):
# GPU_BATCH_SIZE=128
# GPU_USE_FP16=true
#
#High-Performance Production (Multiple GPUs):
# GPU_BATCH_SIZE=128
# GPU_MAX_DELAY_MS=25
# GPU_QUEUE_SIZE=2000
# GPU_TIMEOUT=7200.0
# GPU_USE_FP16=true
# GPU_ENABLE_WARMUP=true
# =============================================================================




# =============================================================================
# MODEL POOL CONFIGURATION
# Memory calculation per model instance
# BART_LARGE_CNN_MEMORY = "~2.5GB"  # Base model
# + "~1-2GB"                         # Tokenizer and embeddings
# + "~0.5-1GB"                       # Runtime overhead
# = "~4-5.5GB per instance"

# Total memory for different settings
# MODEL_POOL_MAX_INSTANCES=2:  ~8-11GB total
# MODEL_POOL_MAX_INSTANCES=4:  ~16-22GB total
# MODEL_POOL_MAX_INSTANCES=6:  ~24-33GB total
# # GPU Memory Considerations
# RTX_4090 (24GB):     MODEL_POOL_MAX_INSTANCES=4-5
# RTX_3090 (24GB):     MODEL_POOL_MAX_INSTANCES=4-5
# RTX_3080 (10GB):     MODEL_POOL_MAX_INSTANCES=2
# RTX_3070 (8GB):      MODEL_POOL_MAX_INSTANCES=1-2

# # CPU/RAM Considerations
# 32GB RAM:             MODEL_POOL_MAX_INSTANCES=2-3
# 64GB RAM:             MODEL_POOL_MAX_INSTANCES=4-6
# 128GB RAM:            MODEL_POOL_MAX_INSTANCES=6-8
# =============================================================================

# Model Pool Settings
MODEL_POOL_MAX_INSTANCES=4


# =============================================================================
# WEB SCRAPER CONFIGURATION
# Development
# WEB_SCRAPER_BATCH_SIZE=5
# Production
# WEB_SCRAPER_BATCH_SIZE=15
# =============================================================================
WEB_SCRAPER_BATCH_SIZE=5


# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging Configuration
LOG_FORMAT=json
LOG_FILE=logs/masx.log
LOG_ROTATION=daily
LOG_RETENTION=30


# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
TEST_SUMMARIZER=HDBSCAN

# =============================================================================
# DEPLOYMENT
# =============================================================================
# MASX ETL Cleanup (for serverless environments)
MASX_ETL_CLEANUP=true

# =============================================================================
# PLAYWRIGHT CONFIGURATION
# =============================================================================

#Playwright Browser Settings
#PLAYWRIGHT_BROWSERS_PATH=/ms-playwright
#PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1

# =============================================================================
# DEVICE FORCING (for debugging/testing)
# =============================================================================

# Force specific device usage (overrides auto-detection)
MASX_FORCE_CPU=true
MASX_FORCE_GPU=false
